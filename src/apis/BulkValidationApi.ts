/* tslint:disable */
/* eslint-disable */
/**
 * MailOdds Email Validation API
 * MailOdds provides email validation services to help maintain clean email lists  and improve deliverability. The API performs multiple validation checks including  format verification, domain validation, MX record checking, and disposable email detection.  ## Authentication  All API requests require authentication using a Bearer token. Include your API key  in the Authorization header:  ``` Authorization: Bearer YOUR_API_KEY ```  API keys can be created in the MailOdds dashboard.  ## Rate Limits  Rate limits vary by plan: - Free: 10 requests/minute - Starter: 60 requests/minute   - Pro: 300 requests/minute - Business: 1000 requests/minute - Enterprise: Custom limits  ## Response Format  All responses include: - `schema_version`: API schema version (currently \"1.0\") - `request_id`: Unique request identifier for debugging  Error responses include: - `error`: Machine-readable error code - `message`: Human-readable error description 
 *
 * The version of the OpenAPI document: 1.0.0
 * Contact: support@mailodds.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  CreateJobFromS3Request,
  CreateJobRequest,
  DeleteJob200Response,
  ErrorResponse,
  GetPresignedUploadRequest,
  JobListResponse,
  JobResponse,
  PresignedUploadResponse,
  ResultsResponse,
} from '../models/index';
import {
    CreateJobFromS3RequestFromJSON,
    CreateJobFromS3RequestToJSON,
    CreateJobRequestFromJSON,
    CreateJobRequestToJSON,
    DeleteJob200ResponseFromJSON,
    DeleteJob200ResponseToJSON,
    ErrorResponseFromJSON,
    ErrorResponseToJSON,
    GetPresignedUploadRequestFromJSON,
    GetPresignedUploadRequestToJSON,
    JobListResponseFromJSON,
    JobListResponseToJSON,
    JobResponseFromJSON,
    JobResponseToJSON,
    PresignedUploadResponseFromJSON,
    PresignedUploadResponseToJSON,
    ResultsResponseFromJSON,
    ResultsResponseToJSON,
} from '../models/index';

export interface CancelJobRequest {
    jobId: string;
}

export interface CreateJobOperationRequest {
    createJobRequest: CreateJobRequest;
}

export interface CreateJobFromS3OperationRequest {
    createJobFromS3Request: CreateJobFromS3Request;
}

export interface CreateJobUploadRequest {
    file: Blob;
    dedup?: boolean;
    metadata?: string;
}

export interface DeleteJobRequest {
    jobId: string;
}

export interface GetJobRequest {
    jobId: string;
}

export interface GetJobResultsRequest {
    jobId: string;
    format?: GetJobResultsFormatEnum;
    filter?: GetJobResultsFilterEnum;
    page?: number;
    perPage?: number;
}

export interface GetPresignedUploadOperationRequest {
    getPresignedUploadRequest: GetPresignedUploadRequest;
}

export interface ListJobsRequest {
    page?: number;
    perPage?: number;
    status?: ListJobsStatusEnum;
}

/**
 * 
 */
export class BulkValidationApi extends runtime.BaseAPI {

    /**
     * Cancel a pending or processing job. Partial results are preserved.
     * Cancel a job
     */
    async cancelJobRaw(requestParameters: CancelJobRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<JobResponse>> {
        if (requestParameters['jobId'] == null) {
            throw new runtime.RequiredError(
                'jobId',
                'Required parameter "jobId" was null or undefined when calling cancelJob().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/jobs/{job_id}/cancel`;
        urlPath = urlPath.replace(`{${"job_id"}}`, encodeURIComponent(String(requestParameters['jobId'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => JobResponseFromJSON(jsonValue));
    }

    /**
     * Cancel a pending or processing job. Partial results are preserved.
     * Cancel a job
     */
    async cancelJob(requestParameters: CancelJobRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<JobResponse> {
        const response = await this.cancelJobRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Create a new bulk validation job by submitting a JSON array of emails.
     * Create bulk validation job (JSON)
     */
    async createJobRaw(requestParameters: CreateJobOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<JobResponse>> {
        if (requestParameters['createJobRequest'] == null) {
            throw new runtime.RequiredError(
                'createJobRequest',
                'Required parameter "createJobRequest" was null or undefined when calling createJob().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/jobs`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: CreateJobRequestToJSON(requestParameters['createJobRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => JobResponseFromJSON(jsonValue));
    }

    /**
     * Create a new bulk validation job by submitting a JSON array of emails.
     * Create bulk validation job (JSON)
     */
    async createJob(requestParameters: CreateJobOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<JobResponse> {
        const response = await this.createJobRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Create a validation job from a file previously uploaded to S3.
     * Create job from S3 upload
     */
    async createJobFromS3Raw(requestParameters: CreateJobFromS3OperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<JobResponse>> {
        if (requestParameters['createJobFromS3Request'] == null) {
            throw new runtime.RequiredError(
                'createJobFromS3Request',
                'Required parameter "createJobFromS3Request" was null or undefined when calling createJobFromS3().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/jobs/upload/s3`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: CreateJobFromS3RequestToJSON(requestParameters['createJobFromS3Request']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => JobResponseFromJSON(jsonValue));
    }

    /**
     * Create a validation job from a file previously uploaded to S3.
     * Create job from S3 upload
     */
    async createJobFromS3(requestParameters: CreateJobFromS3OperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<JobResponse> {
        const response = await this.createJobFromS3Raw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Create a new bulk validation job by uploading a CSV, Excel, or TXT file.
     * Create bulk validation job (file upload)
     */
    async createJobUploadRaw(requestParameters: CreateJobUploadRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<JobResponse>> {
        if (requestParameters['file'] == null) {
            throw new runtime.RequiredError(
                'file',
                'Required parameter "file" was null or undefined when calling createJobUpload().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }
        const consumes: runtime.Consume[] = [
            { contentType: 'multipart/form-data' },
        ];
        // @ts-ignore: canConsumeForm may be unused
        const canConsumeForm = runtime.canConsumeForm(consumes);

        let formParams: { append(param: string, value: any): any };
        let useForm = false;
        // use FormData to transmit files using content-type "multipart/form-data"
        useForm = canConsumeForm;
        if (useForm) {
            formParams = new FormData();
        } else {
            formParams = new URLSearchParams();
        }

        if (requestParameters['file'] != null) {
            formParams.append('file', requestParameters['file'] as any);
        }

        if (requestParameters['dedup'] != null) {
            formParams.append('dedup', requestParameters['dedup'] as any);
        }

        if (requestParameters['metadata'] != null) {
            formParams.append('metadata', requestParameters['metadata'] as any);
        }


        let urlPath = `/v1/jobs/upload`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: formParams,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => JobResponseFromJSON(jsonValue));
    }

    /**
     * Create a new bulk validation job by uploading a CSV, Excel, or TXT file.
     * Create bulk validation job (file upload)
     */
    async createJobUpload(requestParameters: CreateJobUploadRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<JobResponse> {
        const response = await this.createJobUploadRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Permanently delete a completed or cancelled job and its results.
     * Delete a job
     */
    async deleteJobRaw(requestParameters: DeleteJobRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<DeleteJob200Response>> {
        if (requestParameters['jobId'] == null) {
            throw new runtime.RequiredError(
                'jobId',
                'Required parameter "jobId" was null or undefined when calling deleteJob().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/jobs/{job_id}`;
        urlPath = urlPath.replace(`{${"job_id"}}`, encodeURIComponent(String(requestParameters['jobId'])));

        const response = await this.request({
            path: urlPath,
            method: 'DELETE',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => DeleteJob200ResponseFromJSON(jsonValue));
    }

    /**
     * Permanently delete a completed or cancelled job and its results.
     * Delete a job
     */
    async deleteJob(requestParameters: DeleteJobRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<DeleteJob200Response> {
        const response = await this.deleteJobRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Get the status and details of a specific validation job.
     * Get job status
     */
    async getJobRaw(requestParameters: GetJobRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<JobResponse>> {
        if (requestParameters['jobId'] == null) {
            throw new runtime.RequiredError(
                'jobId',
                'Required parameter "jobId" was null or undefined when calling getJob().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/jobs/{job_id}`;
        urlPath = urlPath.replace(`{${"job_id"}}`, encodeURIComponent(String(requestParameters['jobId'])));

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => JobResponseFromJSON(jsonValue));
    }

    /**
     * Get the status and details of a specific validation job.
     * Get job status
     */
    async getJob(requestParameters: GetJobRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<JobResponse> {
        const response = await this.getJobRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Download validation results in JSON, CSV, or NDJSON format.
     * Get job results
     */
    async getJobResultsRaw(requestParameters: GetJobResultsRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<ResultsResponse>> {
        if (requestParameters['jobId'] == null) {
            throw new runtime.RequiredError(
                'jobId',
                'Required parameter "jobId" was null or undefined when calling getJobResults().'
            );
        }

        const queryParameters: any = {};

        if (requestParameters['format'] != null) {
            queryParameters['format'] = requestParameters['format'];
        }

        if (requestParameters['filter'] != null) {
            queryParameters['filter'] = requestParameters['filter'];
        }

        if (requestParameters['page'] != null) {
            queryParameters['page'] = requestParameters['page'];
        }

        if (requestParameters['perPage'] != null) {
            queryParameters['per_page'] = requestParameters['perPage'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/jobs/{job_id}/results`;
        urlPath = urlPath.replace(`{${"job_id"}}`, encodeURIComponent(String(requestParameters['jobId'])));

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => ResultsResponseFromJSON(jsonValue));
    }

    /**
     * Download validation results in JSON, CSV, or NDJSON format.
     * Get job results
     */
    async getJobResults(requestParameters: GetJobResultsRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<ResultsResponse> {
        const response = await this.getJobResultsRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Get a presigned URL for uploading large files (>10MB) directly to S3.
     * Get S3 presigned upload URL
     */
    async getPresignedUploadRaw(requestParameters: GetPresignedUploadOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<PresignedUploadResponse>> {
        if (requestParameters['getPresignedUploadRequest'] == null) {
            throw new runtime.RequiredError(
                'getPresignedUploadRequest',
                'Required parameter "getPresignedUploadRequest" was null or undefined when calling getPresignedUpload().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/jobs/upload/presigned`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: GetPresignedUploadRequestToJSON(requestParameters['getPresignedUploadRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => PresignedUploadResponseFromJSON(jsonValue));
    }

    /**
     * Get a presigned URL for uploading large files (>10MB) directly to S3.
     * Get S3 presigned upload URL
     */
    async getPresignedUpload(requestParameters: GetPresignedUploadOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<PresignedUploadResponse> {
        const response = await this.getPresignedUploadRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * List all validation jobs for the authenticated account.
     * List validation jobs
     */
    async listJobsRaw(requestParameters: ListJobsRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<JobListResponse>> {
        const queryParameters: any = {};

        if (requestParameters['page'] != null) {
            queryParameters['page'] = requestParameters['page'];
        }

        if (requestParameters['perPage'] != null) {
            queryParameters['per_page'] = requestParameters['perPage'];
        }

        if (requestParameters['status'] != null) {
            queryParameters['status'] = requestParameters['status'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("BearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/v1/jobs`;

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => JobListResponseFromJSON(jsonValue));
    }

    /**
     * List all validation jobs for the authenticated account.
     * List validation jobs
     */
    async listJobs(requestParameters: ListJobsRequest = {}, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<JobListResponse> {
        const response = await this.listJobsRaw(requestParameters, initOverrides);
        return await response.value();
    }

}

/**
 * @export
 */
export const GetJobResultsFormatEnum = {
    Json: 'json',
    Csv: 'csv',
    Ndjson: 'ndjson'
} as const;
export type GetJobResultsFormatEnum = typeof GetJobResultsFormatEnum[keyof typeof GetJobResultsFormatEnum];
/**
 * @export
 */
export const GetJobResultsFilterEnum = {
    All: 'all',
    ValidOnly: 'valid_only',
    InvalidOnly: 'invalid_only'
} as const;
export type GetJobResultsFilterEnum = typeof GetJobResultsFilterEnum[keyof typeof GetJobResultsFilterEnum];
/**
 * @export
 */
export const ListJobsStatusEnum = {
    Pending: 'pending',
    Processing: 'processing',
    Completed: 'completed',
    Failed: 'failed',
    Cancelled: 'cancelled'
} as const;
export type ListJobsStatusEnum = typeof ListJobsStatusEnum[keyof typeof ListJobsStatusEnum];
